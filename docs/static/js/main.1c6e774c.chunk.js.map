{"version":3,"sources":["Controller.module.css","actions.ts","store.ts","reducer.ts","Provider.tsx","DaysSelector.tsx","UserTasks.tsx","Chart.tsx","ProjectSelector.tsx","MilestoneSelector.tsx","CustomValuesSelector.tsx","TaskStatusSelector.tsx","Controller.tsx","UnSetTasks.tsx","App.tsx","serviceWorker.ts","index.tsx","UserTasks.module.css"],"names":["module","exports","header","ActionTypes","StorageKey","getFromStorage","key","localStorage","getItem","getFromStorageWithSubkey","subkey","concat","setToStorage","item","setItem","setToStorageWithSubkey","initialStateFn","url","URL","pid","PID","mid","MID","custom_eid","CUSTOM_EID","custom_rid","CUSTOM_RID","biz_days_str","BIZ_DAYS","biz_days","_","compact","split","sort","reject_task_status_ids","REJECT_TASK_STATUS_IDS","isOpen","custom_attrs","milestones","tasks","custom_value_map","WeakMap","updated_time","reducer","state","arguments","length","undefined","action","type","SET_URL","payload","Object","objectSpread","SET_PID","SET_MID","SET_MILESTONES","SET_CUSTOM_EID","SET_CUSTOM_ATTRS","SET_CUSTOM_RID","SET_BIZ_DAYS","join","ADD_BIZ_DAY","biz_day","chain","toConsumableArray","uniq","value","REMOVE_BIZ_DAY","reject","SET_TASKS","SET_CUSTOM_VALUE_MAP","SET_REJECT_TASK_STATUS_IDS","ADD_REJECT_TASK_STATUS_ID","reject_task_status_id","REMOVE_REJECT_TASK_STATUS_ID","OPEN_CONTROLLER","CLOSE_CONTROLLER","UPDATE_DATA","Date","now","baseUrl","replace","initialState","RootContext","createContext","setUrl","setPid","setMid","setMilestones","setCustomEid","setCustomRid","setCustomAttrs","setBizDays","addBizDay","removeBizDay","setTasks","setCustomValueMap","toggeRejectTaskStatus","task_status_id","is_reject","openController","closeController","updateData","Provider","_ref","children","_useReducer","useReducer","_useReducer2","slicedToArray","dispatch","useCallback","react_default","a","createElement","dayNameFromIdx","date","idx","getMilestone","items","find","String","id","weekClassName","day","text-danger","text-info","DayItem","_useContext","useContext","format","handleChange","e","bizDay","target","checked","isPlanning","eleId","Fragment","className","classNames","table-info","biz","isWeekDay","reactstrap_es","check","inline","onChange","disabled","isWeekendDay","includes","indexOf","dayName","DaysSelector","_useContext2","_useContext2$state","_useState","useState","_useState2","setItems","useEffect","milestone","startM","moment","estimated_start","local","daysInSprint","estimated_finish","diff","times","map","i","clone","add","getDays","filter","weekdays","chunk","bordered","days","DaysSelector_DayItem","getCustomVal","task","has","val","get","Number","sum","NameAndWorkLoad","username","total","icon","tblCls","faGrinBeam","faGrinBeamSweat","faDizzy","index_es","Medal","_ref2","_getGrade","r","isNumber","Math","abs","getGrade","_getGrade2","grade","num","styles","faMedal","UserRow","_ref3","sums","isPast","hpd","customTotal","setTotal","margedTotal","totalStr","UserTasks_NameAndWorkLoad","custom_input_td","bsSize","step","UserTasks_Medal","getTaskSumByUser","eid","rid","mapValues","groupBy","getTasksByUser","reduce","result","getCustomAttr","UserTasks","_useContext$state","_useState3","_useState4","_useState5","_useState6","setHpd","_useState7","_useState8","activeLen","asyncToGenerator","regenerator_default","mark","_callee","_ref5","members","wrap","_context","prev","next","axios","sent","data","stop","this","disableSubmit","preventDefault","stopPropagation","taskSumByUser","customAttrE","customAttrR","unassignedSum","last","endOf","color","light","onSubmit","placeholder","addonType","faTimes","faEquals","onClick","faSyncAlt","name","UserTasks_UserRow","getSumVal","Chart","setData","days_len","allTaskVal","created_date","getTaskCreated","label","estimate","finished_date","getTaskFinished","getTaskCreatedToday","ComposedChart","width","height","YAxis","XAxis","dataKey","Tooltip","Bar","fill","stackId","Line","ProjectSelector","statePid","MilestoneSelector","stateMid","params","project","_callee2","_ref4","_context2","headers","x-disable-pagination","status","CustomValuesSelector","stateEid","stateRid","_callee3","wmap","_context3","t0","Promise","all","custom_attr_val","abrupt","_x","apply","t1","StatusItem","defaultChecked","TaskStatusSelector","TaskStatusSelector_StatusItem","Controller","stateUrl","setStateUrl","handleUrl","handleSubmit","handleHref","rotation","toggle","taskboardUrl","project_extra_info","slug","getTaskboardUrl","faChevronCircleRight","pill","getSpName","head","getRange","href","faExternalLinkAlt","defaultValue","ProjectSelector_ProjectSelector","MilestoneSelector_MilestoneSelector","CustomValuesSelector_CustomValuesSelector","DaysSelector_DaysSelector","TaskStatusSelector_TaskStatusSelector","TaskItem","ref","tag","subject","UnSettingTasks","UnSetTasks_TaskItem","App","Provider_Provider","Controller_Controller","UserTasks_UserTasks","UnSetTasks_UnSettingTasks","Chart_Chart","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","gold","silver","bronze"],"mappings":"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","file":"static/js/main.1c6e774c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Controller_header__3vMNd\"};","export enum ActionTypes {\n  SET_URL = 'SET_URL',\n  SET_PID = 'SET_PID',\n  SET_MID = 'SET_MID',\n  SET_MILESTONES = 'SET_MILESTONES',\n  SET_CUSTOM_EID = 'SET_CUSTOM_EID',\n  SET_CUSTOM_RID = 'SET_CUSTOM_RID',\n  SET_CUSTOM_ATTRS = 'SET_CUSTOM_ATTRS',\n  SET_BIZ_DAYS = 'SET_BIZ_DAYS',\n  ADD_BIZ_DAY = 'ADD_BIZ_DAY',\n  REMOVE_BIZ_DAY = 'REMOVE_BIZ_DAY',\n  SET_TASKS = 'SET_TASKS',\n  SET_CUSTOM_VALUE_MAP = 'SET_CUSTOM_VALUE_MAP',\n  SET_REJECT_TASK_STATUS_IDS = 'SET_REJECT_TASK_STATUS_IDS',\n  ADD_REJECT_TASK_STATUS_ID = 'ADD_REJECT_TASK_STATUS',\n  REMOVE_REJECT_TASK_STATUS_ID = 'REMOVE_REJECT_TASK_STATUS',\n  OPEN_CONTROLLER = 'OPEN_CONTROLLER',\n  CLOSE_CONTROLLER = 'CLOSE_CONTROLLER',\n  UPDATE_DATA = 'UPDATE_DATA'\n}\n\nexport interface IAction {\n  type: ActionTypes;\n  payload?: any;\n  meta?: { [key: string]: any };\n}\n","import _ from 'lodash';\nexport interface ICustomAttr {\n  id: number;\n  name: string;\n}\nexport interface IMilestone {\n  id: number;\n  name: string;\n  estimated_start: string;\n  estimated_finish: string;\n  slug: string;\n  project: number;\n  project_extra_info: IProjectExtraInfo;\n}\ninterface IProjectExtraInfo {\n  id: number;\n  name: string;\n  slug: string;\n}\ninterface IStatusExtraInfo {\n  name: string;\n  is_closed: boolean;\n}\nexport interface ITask {\n  id: number;\n  assigned_to: number | null;\n  created_date: string;\n  finished_date: string;\n  is_closed: boolean;\n  subject: string;\n  ref: number;\n  project: number;\n  project_extra_info: IProjectExtraInfo;\n  status: number;\n  status_extra_info: IStatusExtraInfo;\n}\nexport interface ITaskStatus {\n  id: number;\n  name: string;\n  order: number;\n  project: number;\n  is_closed: boolean;\n  slug: string;\n}\nexport interface IAttrValue {}\nexport interface ICustomValue {\n  attributes_values: {\n    [key: number]: string;\n  };\n}\nexport interface IUser {\n  id: number;\n  username: string;\n  full_name: string;\n  full_name_display: string;\n  photo: string;\n}\nexport interface IProject {\n  id: number;\n  name: string;\n  members: IUser[];\n}\nexport type ICustomValueMap = WeakMap<ITask, ICustomValue>;\nexport interface IState {\n  url: string;\n  pid: string; // url\n  mid: string; // url\n  custom_eid: string; //  pid\n  custom_rid: string; // pid\n  custom_attrs: ICustomAttr[]; // pid\n  biz_days: string[]; //mid\n  milestones: IMilestone[]; // pid\n  tasks: ITask[]; //mid\n  custom_value_map: ICustomValueMap; // pid\n  reject_task_status_ids: string[]; // pid\n  updated_time: number;\n  isOpen: boolean;\n}\n\nexport enum StorageKey {\n  URL = 'taiga_url',\n  PID = 'taiga_pid',\n  MID = 'taiga_mid',\n  CUSTOM_EID = 'taiga_custom_eid',\n  CUSTOM_RID = 'taiga_custom_rid',\n  BIZ_DAYS = 'taiga_biz_days',\n  REJECT_TASK_STATUS_IDS = 'reject_task_status_ids'\n}\n\nexport const getFromStorage = (key: string) => localStorage.getItem(key) || '';\n\nexport const getFromStorageWithSubkey = (key: StorageKey, subkey: string) =>\n  subkey ? getFromStorage(`${subkey}/${key}`) : '';\n\nexport const setToStorage = (key: string, item: string) => {\n  localStorage.setItem(key, item);\n};\nexport const setToStorageWithSubkey = (\n  key: StorageKey,\n  subkey: string,\n  item: string\n) => {\n  subkey ? setToStorage(`${subkey}/${key}`, item) : null;\n};\nexport const initialStateFn = (): IState => {\n  const url = getFromStorage(StorageKey.URL);\n  const pid = getFromStorage(StorageKey.PID);\n  const mid = getFromStorage(StorageKey.MID);\n  const custom_eid = getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid);\n  const custom_rid = getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid);\n  const biz_days_str = getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid);\n  const biz_days = _.compact(biz_days_str.split(',')).sort();\n  const reject_task_status_ids = _.compact(\n    getFromStorageWithSubkey(StorageKey.REJECT_TASK_STATUS_IDS, pid).split(',')\n  );\n  const isOpen = !(url && pid && mid && custom_eid && custom_rid);\n  return {\n    url,\n    pid,\n    mid,\n    custom_eid,\n    custom_rid,\n    custom_attrs: [],\n    biz_days,\n    milestones: [],\n    tasks: [],\n    custom_value_map: new WeakMap(),\n    reject_task_status_ids,\n    updated_time: 0,\n    isOpen\n  };\n};\n","import _ from 'lodash';\nimport { initialStateFn, IState, StorageKey } from './store';\nimport { ActionTypes, IAction } from './actions';\nimport {\n  setToStorage,\n  setToStorageWithSubkey,\n  getFromStorageWithSubkey\n} from './store';\nexport const reducer = (state = initialStateFn(), action: IAction) => {\n  switch (action.type) {\n    case ActionTypes.SET_URL: {\n      const { url } = action.payload;\n      setToStorage(StorageKey.URL, url);\n      return { ...state, url } as IState;\n    }\n    case ActionTypes.SET_PID: {\n      const { pid } = action.payload;\n      setToStorage(StorageKey.PID, pid);\n      return {\n        ...state,\n        pid,\n        mid: '',\n        custom_eid: getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid),\n        custom_rid: getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid),\n        custom_attrs: [],\n        milestones: [],\n        custom_value_map: new WeakMap()\n      } as IState;\n    }\n    case ActionTypes.SET_MID: {\n      const { mid } = action.payload;\n      setToStorage(StorageKey.MID, mid);\n      return {\n        ...state,\n        mid,\n        tasks: [],\n        biz_days: _.compact(\n          getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid).split(',')\n        ).sort()\n      } as IState;\n    }\n    case ActionTypes.SET_MILESTONES: {\n      const { milestones } = action.payload;\n      return { ...state, milestones } as IState;\n    }\n    case ActionTypes.SET_CUSTOM_EID: {\n      const { custom_eid } = action.payload;\n      setToStorageWithSubkey(StorageKey.CUSTOM_EID, state.pid, custom_eid);\n      return { ...state, custom_eid } as IState;\n    }\n    case ActionTypes.SET_CUSTOM_ATTRS: {\n      const { custom_attrs } = action.payload;\n      return { ...state, custom_attrs } as IState;\n    }\n    case ActionTypes.SET_CUSTOM_RID: {\n      const { custom_rid } = action.payload;\n      setToStorageWithSubkey(StorageKey.CUSTOM_RID, state.pid, custom_rid);\n      return { ...state, custom_rid } as IState;\n    }\n    case ActionTypes.SET_BIZ_DAYS: {\n      const { biz_days } = action.payload;\n      setToStorageWithSubkey(\n        StorageKey.BIZ_DAYS,\n        state.mid,\n        biz_days.join(',')\n      );\n      return { ...state, biz_days } as IState;\n    }\n    case ActionTypes.ADD_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.chain([...state.biz_days, biz_day])\n        .uniq()\n        .sort()\n        .value();\n      setToStorageWithSubkey(\n        StorageKey.BIZ_DAYS,\n        state.mid,\n        biz_days.join(',')\n      );\n      return { ...state, biz_days } as IState;\n    }\n    case ActionTypes.REMOVE_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.reject([...state.biz_days], item => item === biz_day);\n      setToStorageWithSubkey(\n        StorageKey.BIZ_DAYS,\n        state.mid,\n        biz_days.join(',')\n      );\n      return { ...state, biz_days } as IState;\n    }\n    case ActionTypes.SET_TASKS: {\n      const { tasks } = action.payload;\n      return { ...state, tasks } as IState;\n    }\n    case ActionTypes.SET_CUSTOM_VALUE_MAP: {\n      const { custom_value_map } = action.payload;\n      return { ...state, custom_value_map } as IState;\n    }\n    case ActionTypes.SET_REJECT_TASK_STATUS_IDS: {\n      const { reject_task_status_ids } = action.payload;\n      setToStorageWithSubkey(\n        StorageKey.REJECT_TASK_STATUS_IDS,\n        state.pid,\n        reject_task_status_ids.join(',')\n      );\n      return { ...state, reject_task_status_ids } as IState;\n    }\n    case ActionTypes.ADD_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.chain([\n        ...state.reject_task_status_ids,\n        reject_task_status_id\n      ])\n        .compact()\n        .uniq()\n        .value();\n      setToStorageWithSubkey(\n        StorageKey.REJECT_TASK_STATUS_IDS,\n        state.pid,\n        reject_task_status_ids.join(',')\n      );\n      return { ...state, reject_task_status_ids } as IState;\n    }\n    case ActionTypes.REMOVE_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.reject(\n        [...state.reject_task_status_ids],\n        item => item === reject_task_status_id\n      );\n      setToStorageWithSubkey(\n        StorageKey.REJECT_TASK_STATUS_IDS,\n        state.pid,\n        reject_task_status_ids.join(',')\n      );\n      return { ...state, reject_task_status_ids } as IState;\n    }\n    case ActionTypes.OPEN_CONTROLLER: {\n      return { ...state, isOpen: true } as IState;\n    }\n    case ActionTypes.CLOSE_CONTROLLER: {\n      return { ...state, isOpen: false } as IState;\n    }\n    case ActionTypes.UPDATE_DATA: {\n      return { ...state, updated_time: Date.now() } as IState;\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import React, { createContext, useReducer, useCallback } from 'react';\nimport { ActionTypes } from './actions';\nimport {\n  initialStateFn,\n  IMilestone,\n  ICustomAttr,\n  ITask,\n  ICustomValueMap\n} from './store';\nimport { reducer } from './reducer';\nimport _ from 'lodash';\nexport const baseUrl = (url: string) => `${url.replace(/[¥/]$/, '')}/api/v1`;\n\nconst initialState = initialStateFn();\nexport const RootContext = createContext({\n  state: initialState,\n  setUrl: (url: string) => {},\n  setPid: (pid: string) => {},\n  setMid: (mid: string) => {},\n  setMilestones: (milestones: IMilestone[]) => {},\n  setCustomEid: (custom_eid: string) => {},\n  setCustomRid: (custom_rid: string) => {},\n  setCustomAttrs: (custom_attrs: ICustomAttr[]) => {},\n  setBizDays: (biz_days: string[]) => {},\n  addBizDay: (biz_day: string) => {},\n  removeBizDay: (biz_day: string) => {},\n  setTasks: (tasks: ITask[]) => {},\n  setCustomValueMap: (custom_value_map: ICustomValueMap) => {},\n  toggeRejectTaskStatus: (task_status_id: string, is_reject: boolean) => {},\n  openController: () => {},\n  closeController: () => {},\n  updateData: () => {}\n});\n\nexport const Provider = ({ children }: { children: React.ReactNode }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const value = {\n    state,\n    setUrl: useCallback(\n      (url: string) => {\n        dispatch({ type: ActionTypes.SET_URL, payload: { url } });\n      },\n      [dispatch]\n    ),\n    setPid: useCallback(\n      (pid: string) => {\n        dispatch({ type: ActionTypes.SET_PID, payload: { pid } });\n      },\n      [dispatch]\n    ),\n    setMid: useCallback(\n      (mid: string) => {\n        dispatch({ type: ActionTypes.SET_MID, payload: { mid } });\n      },\n      [dispatch]\n    ),\n    setMilestones: useCallback(\n      (milestones: IMilestone[]) => {\n        dispatch({ type: ActionTypes.SET_MILESTONES, payload: { milestones } });\n      },\n      [dispatch]\n    ),\n    setCustomEid: useCallback(\n      (custom_eid: string) => {\n        dispatch({ type: ActionTypes.SET_CUSTOM_EID, payload: { custom_eid } });\n      },\n      [dispatch]\n    ),\n    setCustomRid: useCallback(\n      (custom_rid: string) => {\n        dispatch({ type: ActionTypes.SET_CUSTOM_RID, payload: { custom_rid } });\n      },\n      [dispatch]\n    ),\n    setCustomAttrs: useCallback(\n      (custom_attrs: ICustomAttr[]) => {\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_ATTRS,\n          payload: { custom_attrs }\n        });\n      },\n      [dispatch]\n    ),\n    setBizDays: useCallback(\n      (biz_days: string[]) => {\n        dispatch({ type: ActionTypes.SET_BIZ_DAYS, payload: { biz_days } });\n      },\n      [dispatch]\n    ),\n    addBizDay: useCallback(\n      (biz_day: string) => {\n        dispatch({ type: ActionTypes.ADD_BIZ_DAY, payload: { biz_day } });\n      },\n      [dispatch]\n    ),\n    removeBizDay: useCallback(\n      (biz_day: string) => {\n        dispatch({ type: ActionTypes.REMOVE_BIZ_DAY, payload: { biz_day } });\n      },\n      [dispatch]\n    ),\n    setTasks: useCallback(\n      (tasks: ITask[]) => {\n        dispatch({ type: ActionTypes.SET_TASKS, payload: { tasks } });\n      },\n      [dispatch]\n    ),\n    setCustomValueMap: useCallback(\n      (custom_value_map: ICustomValueMap) => {\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_VALUE_MAP,\n          payload: { custom_value_map }\n        });\n      },\n      [dispatch]\n    ),\n    toggeRejectTaskStatus: useCallback(\n      (reject_task_status_id: string, is_reject: boolean) => {\n        const type = is_reject\n          ? ActionTypes.ADD_REJECT_TASK_STATUS_ID\n          : ActionTypes.REMOVE_REJECT_TASK_STATUS_ID;\n        dispatch({\n          type,\n          payload: { reject_task_status_id }\n        });\n      },\n      [dispatch]\n    ),\n    openController: useCallback(\n      () => {\n        dispatch({ type: ActionTypes.OPEN_CONTROLLER });\n      },\n      [dispatch]\n    ),\n    closeController: useCallback(\n      () => {\n        dispatch({ type: ActionTypes.CLOSE_CONTROLLER });\n      },\n      [dispatch]\n    ),\n    updateData: useCallback(\n      () => {\n        dispatch({\n          type: ActionTypes.UPDATE_DATA\n        });\n      },\n      [dispatch]\n    )\n  };\n  return <RootContext.Provider value={value}>{children}</RootContext.Provider>;\n};\n","import React, { useEffect, useState, useContext, useCallback } from 'react';\nimport classNames from 'classnames';\nimport {\n  UncontrolledTooltip,\n  Table,\n  Card,\n  CardHeader,\n  Input,\n  Label,\n  FormGroup,\n  Badge\n} from 'reactstrap';\nimport { IMilestone } from './store';\nimport { RootContext } from './Provider';\nimport moment, { Moment } from 'moment';\nimport biz from 'moment-business';\nimport _ from 'lodash';\nexport const isToday = (date: string) => {\n  moment()\n    .local()\n    .format('YYYY-MM-DD') ===\n    moment(date)\n      .local()\n      .format('YYYY-MM-DD');\n};\nexport const dayNameFromIdx = (date: string, idx: number) => {\n  if (idx === -1) {\n    return '';\n  }\n  if (idx === 0) {\n    return 'Planning';\n  }\n  return `Day ${idx}`;\n};\n\nexport const dayName = (date: string, biz_days: string[]) => {\n  const idx = biz_days.indexOf(date);\n  return dayNameFromIdx(date, idx);\n};\nexport const getMilestone = (mid: string, items: IMilestone[]) =>\n  items.find(item => String(item.id) === mid);\nconst getDays = (item: IMilestone) => {\n  const startM = moment(item.estimated_start).local();\n  const finishM = moment(item.estimated_finish).local();\n  const daysInSprint = finishM.diff(startM, 'days');\n  return _.times(daysInSprint).map(i => startM.clone().add(i, 'days'));\n};\nconst getDefaultBizDays = (items: Moment[]) =>\n  items\n    .filter(item => biz.isWeekDay(item))\n    .map(item => item.format('YYYY-MM-DD'));\n\nconst weekClassName = (day: number) => ({\n  'text-danger': day === 0,\n  'text-info': day === 6\n});\n\nconst DayItem = ({\n  item,\n  biz_days,\n  idx\n}: {\n  item: Moment | null;\n  biz_days: string[];\n  idx: number;\n}) => {\n  if (!item) {\n    return (\n      <td>\n        <br />\n      </td>\n    );\n  }\n  const { addBizDay, removeBizDay } = useContext(RootContext);\n  const value = item.format('YYYY-MM-DD');\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const bizDay = e.target.value;\n      e.target.checked ? addBizDay(bizDay) : removeBizDay(bizDay);\n    },\n    [addBizDay, removeBizDay]\n  );\n  const isPlanning = value === biz_days[0];\n  const eleId = `biz-day-${value}`;\n  return (\n    <>\n      <td\n        className={classNames(weekClassName(idx), { 'table-info': isPlanning })}\n        id={eleId}\n      >\n        {biz.isWeekDay(item) ? (\n          <FormGroup check inline>\n            <Label check>\n              <Input\n                onChange={handleChange}\n                disabled={biz.isWeekendDay(item)}\n                value={value}\n                type=\"checkbox\"\n                checked={_.includes(biz_days, value)}\n                className=\"form-check-input\"\n              />\n              {value}\n            </Label>\n          </FormGroup>\n        ) : (\n          <span>{value}</span>\n        )}\n      </td>\n      {_.includes(biz_days, value) ? (\n        <UncontrolledTooltip target={eleId}>\n          {dayName(value, biz_days)}\n        </UncontrolledTooltip>\n      ) : null}\n    </>\n  );\n};\n\nexport const DaysSelector = () => {\n  const {\n    state: { mid, milestones, biz_days },\n    setBizDays\n  } = useContext(RootContext);\n  const [items, setItems] = useState<Moment[]>([]);\n  useEffect(\n    () => {\n      const milestone = getMilestone(mid, milestones);\n      if (milestone) {\n        const items = getDays(milestone);\n        setItems(items);\n        if (biz_days.length <= 1) {\n          setBizDays(getDefaultBizDays(items));\n        }\n      }\n    },\n    [mid, milestones, biz_days]\n  );\n  if (items.length === 0) {\n    return null;\n  } else {\n    const weekdays = _.chunk(\n      [..._.times(items[0].day(), () => null), ...items],\n      7\n    );\n    return (\n      <Card>\n        <CardHeader>Business Days</CardHeader>\n        <Table bordered>\n          <thead>\n            <tr>\n              {moment.weekdays().map((item, idx) => (\n                <th\n                  key={idx}\n                  className={classNames('text-center', weekClassName(idx))}\n                >\n                  {item}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {weekdays.map((days, i) => (\n              <tr key={i}>\n                {days.map((item, idx) => (\n                  <DayItem\n                    idx={idx}\n                    key={idx}\n                    item={item}\n                    biz_days={biz_days}\n                  />\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      </Card>\n    );\n  }\n};\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { ICustomValueMap, IProject, IUser, ITask, ICustomAttr } from './store';\nimport { RootContext, baseUrl } from './Provider';\nimport classNames from 'classnames';\nimport {\n  Table,\n  Button,\n  Navbar,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText\n} from 'reactstrap';\nimport _ from 'lodash';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faSyncAlt,\n  faMedal,\n  faTimes,\n  faEquals,\n  faGrinBeam,\n  faGrinBeamSweat,\n  faDizzy\n} from '@fortawesome/free-solid-svg-icons';\nimport styles from './UserTasks.module.css';\nimport moment from 'moment';\n\nconst getTasksByUser = (items: ITask[]) => _.groupBy(items, 'assigned_to');\nexport const parseCustomVal = (val: string) =>\n  _.chain(val)\n    .replace(/[^0-9.+,]/g, '')\n    .replace(/[+]/g, ',')\n    .split(',')\n    .compact()\n    .map(Number)\n    .sum()\n    .value();\n\nexport const getCustomVal = (\n  custom_value_map: ICustomValueMap,\n  task: ITask,\n  id: number\n) => {\n  if (custom_value_map.has(task)) {\n    return parseCustomVal(\n      _.get(custom_value_map.get(task), `attributes_values.${id}`, '0')\n    );\n  } else {\n    return 0;\n  }\n};\nconst getGrade = (e: any, r: any): [string | null, number] => {\n  if (_.isNumber(e) && _.isNumber(r) && e > 0) {\n    const diff = Math.abs(e - r) / e;\n    if (diff <= 0.05) {\n      return ['gold', 3];\n    }\n    if (diff <= 0.1) {\n      return ['silver', 2];\n    }\n    if (diff < 0.2) {\n      return ['bronze', 1];\n    }\n  }\n  return [null, 0];\n};\nconst NameAndWorkLoad = ({\n  username,\n  val,\n  total\n}: {\n  username: string;\n  val: any;\n  total: number;\n}) => {\n  if (val <= 0) {\n    return (\n      <>\n        <td />\n        <td />\n      </>\n    );\n  }\n  const diff = (val - total) / total;\n  let icon;\n  let tblCls;\n  if (diff < -0.1) {\n    icon = faGrinBeam;\n    tblCls = '';\n  } else if (diff <= 0.1) {\n    tblCls = 'table-success';\n    icon = faGrinBeam;\n  } else if (diff <= 0.2) {\n    tblCls = 'table-warning';\n    icon = faGrinBeamSweat;\n  } else {\n    tblCls = 'table-danger';\n    icon = faDizzy;\n  }\n  return (\n    <>\n      <td className={tblCls}>\n        <FontAwesomeIcon className=\"mx-1\" icon={icon} />\n        {username}\n      </td>\n      <td className={classNames(tblCls, 'text-right')}>{val}</td>\n    </>\n  );\n};\n\nconst Medal = ({ e, r }: { e: any; r: any }) => {\n  const [grade, num] = getGrade(e, r);\n  if (grade) {\n    return (\n      <>\n        {_.times(num).map(i => (\n          <FontAwesomeIcon key={i} className={styles[grade]} icon={faMedal} />\n        ))}\n      </>\n    );\n  } else {\n    return null;\n  }\n};\n\nconst UserRow = ({\n  item,\n  sums,\n  isPast,\n  total,\n  hpd\n}: {\n  item: IUser;\n  sums: { [key: string]: { e: number; r: number } };\n  isPast: boolean;\n  total: number;\n  hpd: number;\n}) => {\n  const [customTotal, setTotal] = useState<number>(0);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setTotal(Number(e.target.value) || 0);\n    },\n    [setTotal]\n  );\n  const e = _.get(sums, `${item.id}.e`);\n  const r = _.get(sums, `${item.id}.r`);\n  const margedTotal = customTotal || total;\n  const totalStr = String(margedTotal);\n  return (\n    <tr key={item.id}>\n      {total > 0 ? (\n        <>\n          <NameAndWorkLoad\n            username={item.username}\n            val={e}\n            total={margedTotal}\n          />\n          <td className=\"text-right\">{total}</td>\n          <td className={styles.custom_input_td}>\n            <Input\n              bsSize=\"sm\"\n              type=\"number\"\n              className=\"text-right\"\n              value={totalStr}\n              step={hpd}\n              onChange={handleChange}\n            />\n          </td>\n        </>\n      ) : (\n        <>\n          <td>{item.username}</td>\n          <td className=\"text-right\">{e}</td>\n          <td className=\"text-right\">{r}</td>\n        </>\n      )}\n\n      {isPast ? (\n        <td>\n          <Medal e={e} r={r} />\n        </td>\n      ) : null}\n    </tr>\n  );\n};\nconst getTaskSumByUser = (\n  items: ITask[],\n  custom_value_map: ICustomValueMap,\n  custom_eid: string,\n  custom_rid: string\n) => {\n  const eid = Number(custom_eid);\n  const rid = Number(custom_rid);\n  const tasksByUser = _.mapValues(getTasksByUser(items), tasks =>\n    _.chain(tasks)\n      .map(task => ({\n        e: getCustomVal(custom_value_map, task, eid),\n        r: getCustomVal(custom_value_map, task, rid)\n      }))\n      .reduce((result, val) => ({ e: result.e + val.e, r: result.r + val.r }), {\n        e: 0,\n        r: 0\n      })\n      .value()\n  );\n  return tasksByUser;\n};\nconst getCustomAttr = (items: ICustomAttr[], id: number) =>\n  items.find(item => item.id === id);\nexport const UserTasks = () => {\n  const {\n    state: {\n      url,\n      pid,\n      tasks,\n      custom_value_map,\n      custom_attrs,\n      custom_eid,\n      custom_rid,\n      biz_days\n    },\n    updateData\n  } = useContext(RootContext);\n  const [items, setItems] = useState<IUser[]>([]);\n  const [hpd, setHpd] = useState<number>(0);\n  const [total, setTotal] = useState<number>(0);\n  const activeLen = biz_days.length - 1;\n  useEffect(\n    () => {\n      if (url && pid) {\n        (async () => {\n          const {\n            data: { members }\n          } = await axios.get<IProject>(`${baseUrl(url)}/projects/${pid}`);\n          setItems(members);\n        })();\n      }\n    },\n    [url, pid, setItems]\n  );\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setHpd(Number(e.target.value) || 0);\n    },\n    [setHpd]\n  );\n  const disableSubmit = useCallback((e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n  }, []);\n  useEffect(\n    () => {\n      setTotal(hpd * activeLen);\n    },\n    [hpd, activeLen, setTotal]\n  );\n  const taskSumByUser = getTaskSumByUser(\n    tasks,\n    custom_value_map,\n    custom_eid,\n    custom_rid\n  );\n  const customAttrE = getCustomAttr(custom_attrs, Number(custom_eid));\n  const customAttrR = getCustomAttr(custom_attrs, Number(custom_rid));\n  if (!customAttrE || !customAttrR || biz_days.length <= 1) {\n    return null;\n  }\n  const unassignedSum = _.get(taskSumByUser, 'null.e', 0);\n  const isPlanning = total > 0;\n  const isPast =\n    !isPlanning &&\n    moment().diff(\n      moment(_.last(biz_days))\n        .local()\n        .endOf('days')\n    ) > 0;\n  return (\n    <>\n      <Navbar color=\"light\" light>\n        <Form inline={true} className=\"mr-auto\" onSubmit={disableSubmit}>\n          <InputGroup>\n            <Input\n              type=\"number\"\n              step=\"0.5\"\n              placeholder=\"hours / day\"\n              className=\"text-right\"\n              onChange={handleChange}\n            />\n            <InputGroupAddon addonType=\"append\">\n              <InputGroupText>\n                <FontAwesomeIcon className=\"mx-2\" icon={faTimes} />\n                {activeLen} [days]\n                <FontAwesomeIcon className=\"mx-2\" icon={faEquals} />\n              </InputGroupText>\n              {total > 0 ? (\n                <>\n                  <InputGroupText className=\"bg-white\">\n                    <strong>{total}</strong>\n                  </InputGroupText>\n                  <InputGroupText>hours / sprint</InputGroupText>\n                </>\n              ) : null}\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n        <Button onClick={updateData}>\n          <FontAwesomeIcon icon={faSyncAlt} />\n        </Button>\n      </Navbar>\n      <Table bordered>\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>{customAttrE.name}</th>\n            {isPlanning ? (\n              <>\n                <th>Total</th> <th>Custom</th>\n              </>\n            ) : (\n              <th>{customAttrR.name}</th>\n            )}\n            {isPast ? <th>Grade</th> : null}\n          </tr>\n        </thead>\n        <tbody>\n          {items.map(item => (\n            <UserRow\n              key={item.id}\n              isPast={isPast}\n              item={item}\n              sums={taskSumByUser}\n              total={total}\n              hpd={hpd}\n            />\n          ))}\n          <tr key=\"null\">\n            <td>unassigned</td>\n            <td className=\"text-right text-danger\">{unassignedSum}</td>\n            <td />\n            {isPast || isPlanning ? <td /> : null}\n          </tr>\n        </tbody>\n      </Table>\n    </>\n  );\n};\n","import React, { useContext, useState, useEffect } from 'react';\nimport {\n  ComposedChart,\n  Tooltip,\n  Legend,\n  Line,\n  XAxis,\n  YAxis,\n  Bar\n} from 'recharts';\nimport { ITask, ICustomValueMap } from './store';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport { RootContext } from './Provider';\nimport { dayNameFromIdx } from './DaysSelector';\nimport { getCustomVal } from './UserTasks';\nimport { Card, CardHeader } from 'reactstrap';\ninterface IChartItem {\n  label: string;\n  estimate: number;\n  result?: number;\n  add?: number;\n}\n\nconst getTaskFinished = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      task.finished_date\n        ? moment(date)\n            .local()\n            .endOf('days')\n            .diff(moment(task.finished_date)) > 0\n        : false\n  );\n\nconst getTaskCreatedToday = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .local()\n        .format('YYYY-MM-DD') ===\n      moment(task.created_date)\n        .local()\n        .format('YYYY-MM-DD')\n  );\n\nconst getTaskCreated = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .endOf('days')\n        .diff(moment(task.created_date)) > 0\n  );\n\nconst getSumVal = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  custom_eid: string\n) => {\n  return _.chain(tasks)\n    .map(task => getCustomVal(custom_value_map, task, Number(custom_eid)))\n    .sum()\n    .value();\n};\nexport const Chart = () => {\n  const [data, setData] = useState<IChartItem[]>([]);\n  const {\n    state: { tasks, biz_days, custom_value_map, custom_eid }\n  } = useContext(RootContext);\n  useEffect(\n    () => {\n      const days_len = biz_days.length;\n      if (days_len > 0 && tasks.length > 0 && custom_eid) {\n        const allTaskVal = getSumVal(\n          custom_value_map,\n          getTaskCreated(tasks, biz_days[0]),\n          custom_eid\n        );\n        const data = biz_days.map((day, idx) => {\n          const label = dayNameFromIdx(day, idx);\n          const estimate = allTaskVal - (allTaskVal * idx) / (days_len - 1);\n          if (\n            moment()\n              .local()\n              .endOf('days')\n              .diff(moment(day)) > 0\n          ) {\n            const result =\n              allTaskVal -\n              getSumVal(\n                custom_value_map,\n                getTaskFinished(tasks, day),\n                custom_eid\n              );\n            const add =\n              idx === 0\n                ? 0\n                : getSumVal(\n                    custom_value_map,\n                    getTaskCreatedToday(tasks, day),\n                    custom_eid\n                  );\n            return { label, estimate, result, add };\n          } else {\n            return { label, estimate };\n          }\n        });\n        setData(data);\n      } else {\n        setData([]);\n      }\n    },\n    [tasks, biz_days, custom_eid, custom_value_map, setData]\n  );\n  if (data.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader>Burn down chart</CardHeader>\n        <ComposedChart data={data} width={800} height={400}>\n          <YAxis />\n          <XAxis dataKey=\"label\" />\n          <Tooltip />\n          <Bar dataKey=\"result\" fill=\"#8884d8\" stackId=\"a\" />\n          <Bar dataKey=\"add\" fill=\"#82ca9d\" stackId=\"a\" />\n          <Line dataKey=\"estimate\" />\n        </ComposedChart>\n      </Card>\n    );\n  }\n};\n","import React, { useCallback, useEffect, useContext, useState } from 'react';\nimport axios from 'axios';\nimport { Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { RootContext, baseUrl } from './Provider';\nimport { IProject } from './store';\nexport const ProjectSelector = () => {\n  const {\n    state: { url, pid: statePid },\n    setPid\n  } = useContext(RootContext);\n  const [items, setItems] = useState<IProject[]>([]);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const pid = e.target.value;\n      if (pid) {\n        setPid(pid);\n      }\n    },\n    [setPid]\n  );\n  useEffect(\n    () => {\n      if (url) {\n        (async () => {\n          const { data: items } = await axios.get(`${baseUrl(url)}/projects`);\n          setItems(items);\n        })();\n      }\n    },\n    [url, setItems]\n  );\n\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Project</InputGroupAddon>\n      <Input value={statePid} type=\"select\" onChange={handleChange}>\n        <option value=\"\"> --- </option>\n        {items.map(item => (\n          <option key={item.id} value={item.id}>\n            {item.name}\n          </option>\n        ))}\n      </Input>\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useEffect, useContext, useState } from 'react';\nimport axios from 'axios';\nimport { Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { RootContext, baseUrl } from './Provider';\nimport { IMilestone, ITask } from './store';\nimport _ from 'lodash';\n\nexport const MilestoneSelector = () => {\n  const {\n    state: { url, pid, mid: stateMid, updated_time, reject_task_status_ids },\n    setMid,\n    setMilestones,\n    setTasks\n  } = useContext(RootContext);\n  const [items, setItems] = useState<IMilestone[]>([]);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        setMid(id);\n      }\n    },\n    [setMid, items]\n  );\n  useEffect(\n    () => {\n      if (url && pid) {\n        (async () => {\n          const { data: items } = await axios.get(\n            `${baseUrl(url)}/milestones`,\n            { params: { project: pid } }\n          );\n          setItems(items);\n          setMilestones(items);\n        })();\n      }\n    },\n    [url, pid]\n  );\n  useEffect(\n    () => {\n      if (url && stateMid) {\n        (async () => {\n          const { data: items } = await axios.get<ITask[]>(\n            `${baseUrl(url)}/tasks`,\n            {\n              headers: {\n                'x-disable-pagination': true\n              },\n              params: {\n                milestone: stateMid\n              }\n            }\n          );\n          const tasks = items.filter(\n            item => !_.includes(reject_task_status_ids, String(item.status))\n          );\n          setTasks(tasks);\n        })();\n      }\n    },\n    [url, stateMid, updated_time, reject_task_status_ids]\n  );\n\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Sprint</InputGroupAddon>\n      <Input type=\"select\" value={stateMid} onChange={handleChange}>\n        <option value=\"\"> --- </option>\n        {items.map(item => (\n          <option key={item.id} value={item.id}>\n            {item.name}\n          </option>\n        ))}\n      </Input>\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useEffect, useContext, useState } from 'react';\nimport axios from 'axios';\nimport { Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { ITask, ICustomValue, ICustomAttr } from './store';\nimport { RootContext, baseUrl } from './Provider';\n\nexport const CustomValuesSelector = () => {\n  const {\n    state: { url, pid, custom_eid: stateEid, custom_rid: stateRid, tasks },\n    setCustomEid,\n    setCustomRid,\n    setCustomAttrs,\n    setCustomValueMap\n  } = useContext(RootContext);\n  const [items, setItems] = useState<ICustomAttr[]>([]);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        switch (e.target.name) {\n          case 'eid': {\n            setCustomEid(id);\n            break;\n          }\n          case 'rid': {\n            setCustomRid(id);\n            break;\n          }\n        }\n      }\n    },\n    [setCustomEid, setCustomRid]\n  );\n  useEffect(\n    () => {\n      if (url && pid) {\n        (async () => {\n          const { data: items } = await axios.get(\n            `${baseUrl(url)}/task-custom-attributes`,\n            { params: { project: pid } }\n          );\n          setItems(items);\n          setCustomAttrs(items);\n        })();\n      }\n    },\n    [url, pid, setItems, setCustomAttrs]\n  );\n  useEffect(\n    () => {\n      if (url && tasks.length && stateEid && stateRid) {\n        (async () => {\n          const wmap = new WeakMap(\n            await Promise.all(\n              tasks.map(async item => {\n                const { data: custom_attr_val } = await axios.get(\n                  `${baseUrl(url)}/tasks/custom-attributes-values/${item.id}`\n                );\n                return [item, custom_attr_val] as [ITask, ICustomValue];\n              })\n            )\n          );\n          setCustomValueMap(wmap);\n        })();\n      }\n    },\n    [url, tasks, stateEid, stateRid, setCustomValueMap]\n  );\n\n  return (\n    <div className=\"row\">\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Estimate</InputGroupAddon>\n        <Input\n          value={stateEid}\n          name=\"eid\"\n          type=\"select\"\n          onChange={handleChange}\n        >\n          <option value=\"\"> --- </option>\n          {items.map(item => (\n            <option key={item.id} value={item.id}>\n              {item.name}\n            </option>\n          ))}\n        </Input>\n      </InputGroup>\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Result</InputGroupAddon>\n        <Input\n          value={stateRid}\n          name=\"rid\"\n          type=\"select\"\n          onChange={handleChange}\n        >\n          <option> --- </option>\n          {items.map(item => (\n            <option key={item.id} value={item.id}>\n              {item.name}\n            </option>\n          ))}\n        </Input>\n      </InputGroup>\n    </div>\n  );\n};\n","import React, { useCallback, useEffect, useContext, useState } from 'react';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport { RootContext, baseUrl } from './Provider';\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  Form,\n  Input,\n  FormGroup,\n  Label\n} from 'reactstrap';\nimport { ITaskStatus } from './store';\nconst StatusItem = ({ item }: { item: ITaskStatus }) => {\n  const {\n    state: { reject_task_status_ids },\n    toggeRejectTaskStatus\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      toggeRejectTaskStatus(String(id), !e.target.checked);\n    },\n    [toggeRejectTaskStatus]\n  );\n  return (\n    <FormGroup check inline>\n      <Label check>\n        <Input\n          onChange={handleChange}\n          type=\"checkbox\"\n          value={item.id}\n          defaultChecked={!_.includes(reject_task_status_ids, String(item.id))}\n        />\n        {item.name}\n      </Label>\n    </FormGroup>\n  );\n};\nexport const TaskStatusSelector = () => {\n  const {\n    state: { url, pid }\n  } = useContext(RootContext);\n  const [items, setItems] = useState<ITaskStatus[]>([]);\n  useEffect(\n    () => {\n      if (url && pid) {\n        (async () => {\n          const { data: items } = await axios.get(\n            `${baseUrl(url)}/task-statuses`,\n            {\n              params: { project: pid }\n            }\n          );\n          setItems(items);\n        })();\n      }\n    },\n    [url, pid]\n  );\n  if (items.length === 0) {\n    return null;\n  }\n  return (\n    <Card>\n      <CardHeader>Task status</CardHeader>\n      <CardBody>\n        {items.map(item => (\n          <StatusItem key={item.id} item={item} />\n        ))}\n      </CardBody>\n    </Card>\n  );\n};\n","import React, { useContext, useState, useCallback } from 'react';\nimport _ from 'lodash';\nimport classNames from 'classnames';\nimport { RootContext } from './Provider';\nimport {\n  Card,\n  CardHeader,\n  Collapse,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  Button,\n  Badge\n} from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faChevronCircleRight,\n  faExternalLinkAlt\n} from '@fortawesome/free-solid-svg-icons';\nimport { ProjectSelector } from './ProjectSelector';\nimport { MilestoneSelector } from './MilestoneSelector';\nimport { CustomValuesSelector } from './CustomValuesSelector';\nimport { DaysSelector, getMilestone } from './DaysSelector';\nimport { TaskStatusSelector } from './TaskStatusSelector';\nimport { IMilestone } from './store';\nimport styles from './Controller.module.css';\nconst getSpName = (mid: string, items: IMilestone[]) =>\n  _.get(getMilestone(mid, items), 'name', '');\nconst getTaskboardUrl = (url: string, mid: string, items: IMilestone[]) => {\n  const milestone = getMilestone(mid, items);\n  if (url && milestone) {\n    return `${url}/project/${milestone.project_extra_info.slug}/taskboard/${\n      milestone.slug\n    }`;\n  } else {\n    return '';\n  }\n};\n\nconst getRange = (biz_days: string[]) => {\n  if (biz_days.length > 1) {\n    return `[${_.head(biz_days)} - ${_.last(biz_days)}]`;\n  } else {\n    return '';\n  }\n};\nexport const Controller = () => {\n  const {\n    state: { url: stateUrl, isOpen, mid, milestones, biz_days },\n    setUrl,\n    openController,\n    closeController\n  } = useContext(RootContext);\n  const [url, setStateUrl] = useState('');\n  const handleUrl = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setStateUrl(e.target.value);\n    },\n    [setStateUrl]\n  );\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      if (url) {\n        setUrl(url);\n      }\n      e.preventDefault();\n    },\n    [url, setUrl]\n  );\n  const handleHref = useCallback((e: React.FormEvent) => {\n    e.stopPropagation();\n  }, []);\n  const rotation = isOpen ? 90 : undefined;\n  const toggle = useCallback(\n    () => {\n      if (isOpen) {\n        closeController();\n      } else {\n        openController();\n      }\n    },\n    [openController, closeController, isOpen]\n  );\n  const taskboardUrl = getTaskboardUrl(stateUrl, mid, milestones);\n  return (\n    <Card>\n      <CardHeader className={classNames(styles.header)} onClick={toggle}>\n        <FontAwesomeIcon rotation={rotation} icon={faChevronCircleRight} />\n        <Badge color=\"primary\" pill className=\"p-1 m-1\">\n          <span>{getSpName(mid, milestones)}</span>\n        </Badge>\n        <Badge className=\"p-1 m-1\">\n          <span>{getRange(biz_days)}</span>\n        </Badge>\n        {taskboardUrl ? (\n          <a\n            target=\"_blank\"\n            onClick={handleHref}\n            className=\"float-right\"\n            href={taskboardUrl}\n          >\n            <FontAwesomeIcon className=\"mr-1\" icon={faExternalLinkAlt} />\n            Taskboard\n          </a>\n        ) : null}\n      </CardHeader>\n      <Collapse isOpen={isOpen}>\n        <Form onSubmit={handleSubmit}>\n          <InputGroup>\n            <InputGroupAddon addonType=\"prepend\">URL</InputGroupAddon>\n            <Input\n              defaultValue={stateUrl}\n              onChange={handleUrl}\n              placeholder=\"http://hostname:port\"\n            />\n            <InputGroupAddon addonType=\"append\">\n              <Button>Set</Button>\n            </InputGroupAddon>\n          </InputGroup>\n        </Form>\n        <div className=\"row\">\n          <ProjectSelector />\n          <MilestoneSelector />\n        </div>\n        <CustomValuesSelector />\n        <DaysSelector />\n        <TaskStatusSelector />\n      </Collapse>\n    </Card>\n  );\n};\n","import React, { useContext, useState, useEffect } from 'react';\nimport { RootContext } from './Provider';\nimport { ITask } from './store';\nimport { ListGroup, ListGroupItem, Card, CardHeader } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExternalLinkAlt } from '@fortawesome/free-solid-svg-icons';\nimport { getCustomVal } from './UserTasks';\nconst TaskItem = ({ url, item }: { item: ITask; url: string }) => {\n  const {\n    project_extra_info: { slug }\n  } = item;\n  const href = `${url}/project/${slug}/task/${item.ref}`;\n  return (\n    <ListGroupItem tag=\"a\" target=\"_blank\" href={href}>\n      <FontAwesomeIcon icon={faExternalLinkAlt} /> {item.subject}\n    </ListGroupItem>\n  );\n};\nexport const UnSettingTasks = () => {\n  const {\n    state: { url, tasks, custom_value_map, custom_eid }\n  } = useContext(RootContext);\n  const [items, setItems] = useState<ITask[]>([]);\n  useEffect(\n    () => {\n      if (tasks.length > 0 && custom_eid) {\n        const eid = Number(custom_eid);\n        const items = tasks.filter(\n          task => getCustomVal(custom_value_map, task, eid) === 0\n        );\n        if (tasks.length > items.length) {\n          setItems(items);\n        }\n      }\n    },\n    [tasks, custom_value_map, custom_eid]\n  );\n  if (items.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader>Unset tasks</CardHeader>\n        <ListGroup>\n          {items.map(item => (\n            <TaskItem url={url} key={item.id} item={item} />\n          ))}\n        </ListGroup>\n      </Card>\n    );\n  }\n};\n","import React from 'react';\nimport { Chart } from './Chart';\nimport { Controller } from './Controller';\nimport { UserTasks } from './UserTasks';\nimport { UnSettingTasks } from './UnSetTasks';\nimport { Provider } from './Provider';\nexport const App = () => (\n  <div className=\"container\">\n    <Provider>\n      <Controller />\n      <UserTasks />\n      <UnSettingTasks />\n      <Chart />\n    </Provider>\n  </div>\n);\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gold\":\"UserTasks_gold__2_Oza\",\"silver\":\"UserTasks_silver__FUnAn\",\"bronze\":\"UserTasks_bronze__24R1R\",\"custom_input_td\":\"UserTasks_custom_input_td__2MdyH\"};"],"sourceRoot":""}