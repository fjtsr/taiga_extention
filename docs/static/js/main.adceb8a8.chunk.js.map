{"version":3,"sources":["actions.ts","store.ts","reducer.ts","Provider.tsx","UserTasks.tsx","Chart.tsx","ProjectSelector.tsx","MilestoneSelector.tsx","CustomValuesSelector.tsx","DaysSelector.tsx","TaskStatusSelector.tsx","Controller.tsx","UnSettingTasks.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["ActionTypes","StorageKey","getFromStorage","key","localStorage","getItem","getFromStorageWithSubkey","subkey","concat","setToStorage","item","setItem","setToStorageWithSubkey","initialStateFn","url","URL","pid","PID","mid","MID","custom_eid","CUSTOM_EID","custom_rid","CUSTOM_RID","biz_days_str","BIZ_DAYS","biz_days","_","compact","split","sort","reject_task_status_ids","REJECT_TASK_STATUS_IDS","custom_attrs","milestones","tasks","custom_value_map","WeakMap","updated_time","reducer","state","arguments","length","undefined","action","type","SET_URL","payload","Object","objectSpread","SET_PID","SET_MID","SET_MILESTONES","SET_CUSTOM_EID","SET_CUSTOM_ATTRS","SET_CUSTOM_RID","SET_BIZ_DAYS","join","ADD_BIZ_DAY","biz_day","chain","toConsumableArray","uniq","value","REMOVE_BIZ_DAY","reject","SET_TASKS","SET_CUSTOM_VALUE_MAP","SET_REJECT_TASK_STATUS_IDS","ADD_REJECT_TASK_STATUS_ID","reject_task_status_id","REMOVE_REJECT_TASK_STATUS_ID","UPDATE_DATA","Date","now","baseUrl","replace","initialState","RootContext","createContext","setUrl","setPid","setMid","setMilestones","setCustomEid","setCustomRid","setCustomAttrs","setBizDays","addBizDay","removeBizDay","setTasks","setCustomValueMap","toggeRejectTaskStatus","task_status_id","is_reject","updateData","Provider","_ref","children","_useReducer","useReducer","_useReducer2","slicedToArray","dispatch","useCallback","react_default","a","createElement","getCustomVal","task","id","has","val","get","map","Number","sum","getTaskSumByUser","items","eid","rid","mapValues","groupBy","getTasksByUser","e","r","reduce","result","getCustomAttr","find","UserTasks","_useContext","useContext","_useContext$state","_useState","useState","_useState2","setItems","useEffect","asyncToGenerator","regenerator_default","mark","_callee","_ref2","members","wrap","_context","prev","next","axios","sent","data","stop","this","taskSumByUser","customAttrE","customAttrR","unassignedSum","Fragment","className","reactstrap_es","onClick","index_es","icon","faSyncAlt","bordered","name","username","getSumVal","Chart","setData","days_len","allTaskVal","date","filter","moment","endOf","diff","created_date","getTaskCreated","day","idx","label","estimate","local","finished_date","getTaskFinished","add","format","getTaskCreatedToday","ComposedChart","width","height","YAxis","XAxis","dataKey","Tooltip","Bar","fill","stackId","Line","ProjectSelector","statePid","handleChange","target","addonType","onChange","MilestoneSelector","stateMid","params","project","_callee2","_ref4","_context2","headers","x-disable-pagination","milestone","includes","String","status","CustomValuesSelector","stateEid","stateRid","_callee3","wmap","_context3","t0","Promise","all","_ref5","custom_attr_val","abrupt","_x","apply","t1","weekClassName","text-danger","text-info","DayItem","bizDay","checked","classNames","check","inline","disabled","biz","isWeekendDay","defaultChecked","DaysSelector","_useContext2","_useContext2$state","getMilestone","startM","estimated_start","daysInSprint","estimated_finish","times","i","clone","getDays","isWeekDay","weekdays","chunk","days","DaysSelector_DayItem","StatusItem","TaskStatusSelector","_ref3","TaskStatusSelector_StatusItem","Controller","setStateUrl","handleUrl","handleSubmit","preventDefault","onSubmit","defaultValue","placeholder","ProjectSelector_ProjectSelector","MilestoneSelector_MilestoneSelector","CustomValuesSelector_CustomValuesSelector","DaysSelector_DaysSelector","TaskStatusSelector_TaskStatusSelector","TaskItem","slug","project_extra_info","href","ref","tag","subject","UnSettingTasks","UnSettingTasks_TaskItem","App","Provider_Provider","Controller_Controller","UserTasks_UserTasks","UnSettingTasks_UnSettingTasks","Chart_Chart","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.adceb8a8.chunk.js","sourcesContent":["export enum ActionTypes {\n  SET_URL = 'SET_URL',\n  SET_PID = 'SET_PID',\n  SET_MID = 'SET_MID',\n  SET_MILESTONES = 'SET_MILESTONES',\n  SET_CUSTOM_EID = 'SET_CUSTOM_EID',\n  SET_CUSTOM_RID = 'SET_CUSTOM_RID',\n  SET_CUSTOM_ATTRS = 'SET_CUSTOM_ATTRS',\n  SET_BIZ_DAYS = 'SET_BIZ_DAYS',\n  ADD_BIZ_DAY = 'ADD_BIZ_DAY',\n  REMOVE_BIZ_DAY = 'REMOVE_BIZ_DAY',\n  SET_TASKS = 'SET_TASKS',\n  SET_CUSTOM_VALUE_MAP = 'SET_CUSTOM_VALUE_MAP',\n  SET_REJECT_TASK_STATUS_IDS = 'SET_REJECT_TASK_STATUS_IDS',\n  ADD_REJECT_TASK_STATUS_ID = 'ADD_REJECT_TASK_STATUS',\n  REMOVE_REJECT_TASK_STATUS_ID = 'REMOVE_REJECT_TASK_STATUS',\n  UPDATE_DATA = 'UPDATE_DATA'\n}\n\nexport interface IAction {\n  type: ActionTypes;\n  payload?: any;\n  meta?: { [key: string]: any };\n}\n","import _ from 'lodash';\nexport interface ICustomAttr {\n  id: number;\n  name: string;\n}\nexport interface IMilestone {\n  id: number;\n  name: string;\n  estimated_start: string;\n  estimated_finish: string;\n}\ninterface IProjectExtraInfo {\n  id: number;\n  name: string;\n  slug: string;\n}\ninterface IStatusExtraInfo {\n  name: string;\n  is_closed: boolean;\n}\nexport interface ITask {\n  id: number;\n  assigned_to: number | null;\n  created_date: string;\n  finished_date: string;\n  is_closed: boolean;\n  subject: string;\n  ref: number;\n  project: number;\n  project_extra_info: IProjectExtraInfo;\n  status: number;\n  status_extra_info: IStatusExtraInfo;\n}\nexport interface ITaskStatus {\n  id: number;\n  name: string;\n  order: number;\n  project: number;\n  is_closed: boolean;\n  slug: string;\n}\nexport interface IAttrValue {}\nexport interface ICustomValue {\n  attributes_values: {\n    [key: number]: string;\n  };\n}\nexport interface IUser {\n  id: number;\n  username: string;\n  full_name: string;\n  full_name_display: string;\n  photo: string;\n}\nexport interface IProject {\n  id: number;\n  name: string;\n  members: IUser[];\n}\nexport type ICustomValueMap = WeakMap<ITask, ICustomValue>;\nexport interface IState {\n  url: string;\n  pid: string; // url\n  mid: string; // url\n  custom_eid: string; //  pid\n  custom_rid: string; // pid\n  custom_attrs: ICustomAttr[]; // pid\n  biz_days: string[]; //mid\n  milestones: IMilestone[]; // pid\n  tasks: ITask[]; //mid\n  custom_value_map: ICustomValueMap; // pid\n  reject_task_status_ids: string[]; // pid\n  updated_time: number;\n}\n\nexport enum StorageKey {\n  URL = 'taiga_url',\n  PID = 'taiga_pid',\n  MID = 'taiga_mid',\n  CUSTOM_EID = 'taiga_custom_eid',\n  CUSTOM_RID = 'taiga_custom_rid',\n  BIZ_DAYS = 'taiga_biz_days',\n  REJECT_TASK_STATUS_IDS = 'reject_task_status_ids'\n}\n\nexport const getFromStorage = (key: string) => localStorage.getItem(key) || '';\n\nexport const getFromStorageWithSubkey = (key: StorageKey, subkey: string) =>\n  subkey ? getFromStorage(`${subkey}/${key}`) : '';\n\nexport const setToStorage = (key: string, item: string) => {\n  localStorage.setItem(key, item);\n};\nexport const setToStorageWithSubkey = (\n  key: StorageKey,\n  subkey: string,\n  item: string\n) => {\n  subkey ? setToStorage(`${subkey}/${key}`, item) : null;\n};\nexport const initialStateFn = (): IState => {\n  const url = getFromStorage(StorageKey.URL);\n  const pid = getFromStorage(StorageKey.PID);\n  const mid = getFromStorage(StorageKey.MID);\n  const custom_eid = getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid);\n  const custom_rid = getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid);\n  const biz_days_str = getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid);\n  const biz_days = _.compact(biz_days_str.split(',')).sort();\n  const reject_task_status_ids = _.compact(\n    getFromStorageWithSubkey(StorageKey.REJECT_TASK_STATUS_IDS, pid).split(',')\n  );\n  return {\n    url,\n    pid,\n    mid,\n    custom_eid,\n    custom_rid,\n    custom_attrs: [],\n    biz_days,\n    milestones: [],\n    tasks: [],\n    custom_value_map: new WeakMap(),\n    reject_task_status_ids,\n    updated_time: 0\n  };\n};\n","import _ from 'lodash';\nimport { initialStateFn, IState, StorageKey } from './store';\nimport { ActionTypes, IAction } from './actions';\nimport {\n  setToStorage,\n  setToStorageWithSubkey,\n  getFromStorageWithSubkey\n} from './store';\nexport const reducer = (state = initialStateFn(), action: IAction) => {\n  switch (action.type) {\n    case ActionTypes.SET_URL: {\n      const { url } = action.payload;\n      setToStorage(StorageKey.URL, url);\n      return { ...state, url } as IState;\n    }\n    case ActionTypes.SET_PID: {\n      const { pid } = action.payload;\n      setToStorage(StorageKey.PID, pid);\n      return {\n        ...state,\n        pid,\n        mid: '',\n        custom_eid: getFromStorageWithSubkey(StorageKey.CUSTOM_EID, pid),\n        custom_rid: getFromStorageWithSubkey(StorageKey.CUSTOM_RID, pid),\n        custom_attrs: [],\n        milestones: [],\n        custom_value_map: new WeakMap()\n      } as IState;\n    }\n    case ActionTypes.SET_MID: {\n      const { mid } = action.payload;\n      setToStorage(StorageKey.MID, mid);\n      return {\n        ...state,\n        mid,\n        tasks: [],\n        biz_days: _.compact(\n          getFromStorageWithSubkey(StorageKey.BIZ_DAYS, mid).split(',')\n        ).sort()\n      } as IState;\n    }\n    case ActionTypes.SET_MILESTONES: {\n      const { milestones } = action.payload;\n      return { ...state, milestones } as IState;\n    }\n    case ActionTypes.SET_CUSTOM_EID: {\n      const { custom_eid } = action.payload;\n      setToStorageWithSubkey(StorageKey.CUSTOM_EID, state.pid, custom_eid);\n      return { ...state, custom_eid } as IState;\n    }\n    case ActionTypes.SET_CUSTOM_ATTRS: {\n      const { custom_attrs } = action.payload;\n      return { ...state, custom_attrs } as IState;\n    }\n    case ActionTypes.SET_CUSTOM_RID: {\n      const { custom_rid } = action.payload;\n      setToStorageWithSubkey(StorageKey.CUSTOM_RID, state.pid, custom_rid);\n      return { ...state, custom_rid } as IState;\n    }\n    case ActionTypes.SET_BIZ_DAYS: {\n      const { biz_days } = action.payload;\n      setToStorageWithSubkey(\n        StorageKey.BIZ_DAYS,\n        state.mid,\n        biz_days.join(',')\n      );\n      return { ...state, biz_days } as IState;\n    }\n    case ActionTypes.ADD_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.chain([...state.biz_days, biz_day])\n        .uniq()\n        .sort()\n        .value();\n      setToStorageWithSubkey(\n        StorageKey.BIZ_DAYS,\n        state.mid,\n        biz_days.join(',')\n      );\n      return { ...state, biz_days } as IState;\n    }\n    case ActionTypes.REMOVE_BIZ_DAY: {\n      const { biz_day } = action.payload;\n      const biz_days = _.reject([...state.biz_days], item => item === biz_day);\n      setToStorageWithSubkey(\n        StorageKey.BIZ_DAYS,\n        state.mid,\n        biz_days.join(',')\n      );\n      return { ...state, biz_days } as IState;\n    }\n    case ActionTypes.SET_TASKS: {\n      const { tasks } = action.payload;\n      return { ...state, tasks } as IState;\n    }\n    case ActionTypes.SET_CUSTOM_VALUE_MAP: {\n      const { custom_value_map } = action.payload;\n      return { ...state, custom_value_map } as IState;\n    }\n    case ActionTypes.SET_REJECT_TASK_STATUS_IDS: {\n      const { reject_task_status_ids } = action.payload;\n      setToStorageWithSubkey(\n        StorageKey.REJECT_TASK_STATUS_IDS,\n        state.pid,\n        reject_task_status_ids.join(',')\n      );\n      return { ...state, reject_task_status_ids } as IState;\n    }\n    case ActionTypes.ADD_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.chain([\n        ...state.reject_task_status_ids,\n        reject_task_status_id\n      ])\n        .compact()\n        .uniq()\n        .value();\n      setToStorageWithSubkey(\n        StorageKey.REJECT_TASK_STATUS_IDS,\n        state.pid,\n        reject_task_status_ids.join(',')\n      );\n      return { ...state, reject_task_status_ids } as IState;\n    }\n    case ActionTypes.REMOVE_REJECT_TASK_STATUS_ID: {\n      const { reject_task_status_id } = action.payload;\n      const reject_task_status_ids = _.reject(\n        [...state.reject_task_status_ids],\n        item => item === reject_task_status_id\n      );\n      setToStorageWithSubkey(\n        StorageKey.REJECT_TASK_STATUS_IDS,\n        state.pid,\n        reject_task_status_ids.join(',')\n      );\n      return { ...state, reject_task_status_ids } as IState;\n    }\n    case ActionTypes.UPDATE_DATA: {\n      return { ...state, updated_time: Date.now() } as IState;\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import React, { createContext, useReducer, useCallback } from 'react';\nimport { ActionTypes } from './actions';\nimport {\n  initialStateFn,\n  IMilestone,\n  ICustomAttr,\n  ITask,\n  ICustomValueMap\n} from './store';\nimport { reducer } from './reducer';\nimport _ from 'lodash';\nexport const baseUrl = (url: string) => `${url.replace(/[¥/]$/, '')}/api/v1`;\n\nconst initialState = initialStateFn();\nexport const RootContext = createContext({\n  state: initialState,\n  setUrl: (url: string) => {},\n  setPid: (pid: string) => {},\n  setMid: (mid: string) => {},\n  setMilestones: (milestones: IMilestone[]) => {},\n  setCustomEid: (custom_eid: string) => {},\n  setCustomRid: (custom_rid: string) => {},\n  setCustomAttrs: (custom_attrs: ICustomAttr[]) => {},\n  setBizDays: (biz_days: string[]) => {},\n  addBizDay: (biz_day: string) => {},\n  removeBizDay: (biz_day: string) => {},\n  setTasks: (tasks: ITask[]) => {},\n  setCustomValueMap: (custom_value_map: ICustomValueMap) => {},\n  toggeRejectTaskStatus: (task_status_id: string, is_reject: boolean) => {},\n  updateData: () => {}\n});\n\nexport const Provider = ({ children }: { children: React.ReactNode }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const value = {\n    state,\n    setUrl: useCallback(\n      (url: string) => {\n        dispatch({ type: ActionTypes.SET_URL, payload: { url } });\n      },\n      [dispatch]\n    ),\n    setPid: useCallback(\n      (pid: string) => {\n        dispatch({ type: ActionTypes.SET_PID, payload: { pid } });\n      },\n      [dispatch]\n    ),\n    setMid: useCallback(\n      (mid: string) => {\n        dispatch({ type: ActionTypes.SET_MID, payload: { mid } });\n      },\n      [dispatch]\n    ),\n    setMilestones: useCallback(\n      (milestones: IMilestone[]) => {\n        dispatch({ type: ActionTypes.SET_MILESTONES, payload: { milestones } });\n      },\n      [dispatch]\n    ),\n    setCustomEid: useCallback(\n      (custom_eid: string) => {\n        dispatch({ type: ActionTypes.SET_CUSTOM_EID, payload: { custom_eid } });\n      },\n      [dispatch]\n    ),\n    setCustomRid: useCallback(\n      (custom_rid: string) => {\n        dispatch({ type: ActionTypes.SET_CUSTOM_RID, payload: { custom_rid } });\n      },\n      [dispatch]\n    ),\n    setCustomAttrs: useCallback(\n      (custom_attrs: ICustomAttr[]) => {\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_ATTRS,\n          payload: { custom_attrs }\n        });\n      },\n      [dispatch]\n    ),\n    setBizDays: useCallback(\n      (biz_days: string[]) => {\n        dispatch({ type: ActionTypes.SET_BIZ_DAYS, payload: { biz_days } });\n      },\n      [dispatch]\n    ),\n    addBizDay: useCallback(\n      (biz_day: string) => {\n        dispatch({ type: ActionTypes.ADD_BIZ_DAY, payload: { biz_day } });\n      },\n      [dispatch]\n    ),\n    removeBizDay: useCallback(\n      (biz_day: string) => {\n        dispatch({ type: ActionTypes.REMOVE_BIZ_DAY, payload: { biz_day } });\n      },\n      [dispatch]\n    ),\n    setTasks: useCallback(\n      (tasks: ITask[]) => {\n        dispatch({ type: ActionTypes.SET_TASKS, payload: { tasks } });\n      },\n      [dispatch]\n    ),\n    setCustomValueMap: useCallback(\n      (custom_value_map: ICustomValueMap) => {\n        dispatch({\n          type: ActionTypes.SET_CUSTOM_VALUE_MAP,\n          payload: { custom_value_map }\n        });\n      },\n      [dispatch]\n    ),\n    toggeRejectTaskStatus: useCallback(\n      (reject_task_status_id: string, is_reject: boolean) => {\n        const type = is_reject\n          ? ActionTypes.ADD_REJECT_TASK_STATUS_ID\n          : ActionTypes.REMOVE_REJECT_TASK_STATUS_ID;\n        dispatch({\n          type,\n          payload: { reject_task_status_id }\n        });\n      },\n      [dispatch]\n    ),\n    updateData: useCallback(\n      () => {\n        dispatch({\n          type: ActionTypes.UPDATE_DATA\n        });\n      },\n      [dispatch]\n    )\n  };\n  return <RootContext.Provider value={value}>{children}</RootContext.Provider>;\n};\n","import React, { useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { ICustomValueMap, IProject, IUser, ITask, ICustomAttr } from './store';\nimport { RootContext, baseUrl } from './Provider';\nimport { Table, Button } from 'reactstrap';\nimport _ from 'lodash';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSyncAlt } from '@fortawesome/free-solid-svg-icons';\n\nconst getTasksByUser = (items: ITask[]) => _.groupBy(items, 'assigned_to');\nexport const parseCustomVal = (val: string) =>\n  _.chain(val)\n    .replace(/[^0-9.+,]/g, '')\n    .replace(/[+]/g, ',')\n    .split(',')\n    .compact()\n    .map(Number)\n    .sum()\n    .value();\n\nexport const getCustomVal = (\n  custom_value_map: ICustomValueMap,\n  task: ITask,\n  id: number\n) => {\n  if (custom_value_map.has(task)) {\n    return parseCustomVal(\n      _.get(custom_value_map.get(task), `attributes_values.${id}`, '0')\n    );\n  } else {\n    return 0;\n  }\n};\n\nconst getTaskSumByUser = (\n  items: ITask[],\n  custom_value_map: ICustomValueMap,\n  custom_eid: string,\n  custom_rid: string\n) => {\n  const eid = Number(custom_eid);\n  const rid = Number(custom_rid);\n  const tasksByUser = _.mapValues(getTasksByUser(items), tasks =>\n    _.chain(tasks)\n      .map(task => ({\n        e: getCustomVal(custom_value_map, task, eid),\n        r: getCustomVal(custom_value_map, task, rid)\n      }))\n      .reduce((result, val) => ({ e: result.e + val.e, r: result.r + val.r }), {\n        e: 0,\n        r: 0\n      })\n      .value()\n  );\n  return tasksByUser;\n};\nconst getCustomAttr = (items: ICustomAttr[], id: number) =>\n  items.find(item => item.id === id);\nexport const UserTasks = () => {\n  const {\n    state: {\n      url,\n      pid,\n      tasks,\n      custom_value_map,\n      custom_attrs,\n      custom_eid,\n      custom_rid\n    },\n    updateData\n  } = useContext(RootContext);\n  const [items, setItems] = useState<IUser[]>([]);\n  useEffect(\n    () => {\n      if (url && pid) {\n        (async () => {\n          const {\n            data: { members }\n          } = await axios.get<IProject>(`${baseUrl(url)}/projects/${pid}`);\n          setItems(members);\n        })();\n      }\n    },\n    [url, pid, setItems]\n  );\n  const taskSumByUser = getTaskSumByUser(\n    tasks,\n    custom_value_map,\n    custom_eid,\n    custom_rid\n  );\n  const customAttrE = getCustomAttr(custom_attrs, Number(custom_eid));\n  const customAttrR = getCustomAttr(custom_attrs, Number(custom_rid));\n  if (!customAttrE || !customAttrR) {\n    return null;\n  }\n  const unassignedSum = _.get(taskSumByUser, 'null.e', 0);\n  return (\n    <>\n      <div className=\"text-right\">\n        <Button onClick={updateData}>\n          <FontAwesomeIcon icon={faSyncAlt} />\n        </Button>\n      </div>\n      <Table bordered>\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>{customAttrE.name}</th>\n            <th>{customAttrR.name}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {items.map(item => (\n            <tr key={item.id}>\n              <td>{item.username}</td>\n              <td className=\"text-right\">\n                {_.get(taskSumByUser, `${item.id}.e`)}\n              </td>\n              <td className=\"text-right\">\n                {_.get(taskSumByUser, `${item.id}.r`)}\n              </td>\n            </tr>\n          ))}\n          <tr key=\"null\">\n            <td>unassigned</td>\n            <td className=\"text-right text-danger\">{unassignedSum}</td>\n            <td />\n          </tr>\n        </tbody>\n      </Table>\n    </>\n  );\n};\n","import React, { useContext, useState, useEffect } from 'react';\nimport {\n  ComposedChart,\n  Tooltip,\n  Legend,\n  Line,\n  XAxis,\n  YAxis,\n  Bar\n} from 'recharts';\nimport { ITask, ICustomValueMap } from './store';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport { RootContext } from './Provider';\nimport { getCustomVal } from './UserTasks';\nimport { Card, CardHeader } from 'reactstrap';\ninterface IChartItem {\n  label: string;\n  estimate: number;\n  result?: number;\n  add?: number;\n}\n\nconst getTaskFinished = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      task.finished_date\n        ? moment(date)\n            .local()\n            .endOf('days')\n            .diff(moment(task.finished_date)) > 0\n        : false\n  );\n\nconst getTaskCreatedToday = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .local()\n        .format('YYYY-MM-DD') ===\n      moment(task.created_date)\n        .local()\n        .format('YYYY-MM-DD')\n  );\n\nconst getTaskCreated = (tasks: ITask[], date: string) =>\n  tasks.filter(\n    task =>\n      moment(date)\n        .endOf('days')\n        .diff(moment(task.created_date)) > 0\n  );\n\nconst getSumVal = (\n  custom_value_map: ICustomValueMap,\n  tasks: ITask[],\n  custom_eid: string\n) => {\n  return _.chain(tasks)\n    .map(task => getCustomVal(custom_value_map, task, Number(custom_eid)))\n    .sum()\n    .value();\n};\nexport const Chart = () => {\n  const [data, setData] = useState<IChartItem[]>([]);\n  const {\n    state: { tasks, biz_days, custom_value_map, custom_eid }\n  } = useContext(RootContext);\n  useEffect(\n    () => {\n      const days_len = biz_days.length;\n      if (days_len > 0 && tasks.length > 0 && custom_eid) {\n        const allTaskVal = getSumVal(\n          custom_value_map,\n          getTaskCreated(tasks, biz_days[0]),\n          custom_eid\n        );\n        const data = biz_days.map((day, idx) => {\n          const label = `day ${idx + 1}`;\n          const estimate = allTaskVal - (allTaskVal * idx) / (days_len - 1);\n          if (\n            moment()\n              .local()\n              .endOf('days')\n              .diff(moment(day)) > 0\n          ) {\n            const result =\n              allTaskVal -\n              getSumVal(\n                custom_value_map,\n                getTaskFinished(tasks, day),\n                custom_eid\n              );\n            const add =\n              idx === 0\n                ? 0\n                : getSumVal(\n                    custom_value_map,\n                    getTaskCreatedToday(tasks, day),\n                    custom_eid\n                  );\n            return { label, estimate, result, add };\n          } else {\n            return { label, estimate };\n          }\n        });\n        setData(data);\n      } else {\n        setData([]);\n      }\n    },\n    [tasks, biz_days, custom_eid, custom_value_map, setData]\n  );\n  if (data.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader>Burn down chart</CardHeader>\n        <ComposedChart data={data} width={800} height={400}>\n          <YAxis />\n          <XAxis dataKey=\"label\" />\n          <Tooltip />\n          <Bar dataKey=\"result\" fill=\"#8884d8\" stackId=\"a\" />\n          <Bar dataKey=\"add\" fill=\"#82ca9d\" stackId=\"a\" />\n          <Line dataKey=\"estimate\" />\n        </ComposedChart>\n      </Card>\n    );\n  }\n};\n","import React, { useCallback, useEffect, useContext, useState } from 'react';\nimport axios from 'axios';\nimport { Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { RootContext, baseUrl } from './Provider';\nimport { IProject } from './store';\nexport const ProjectSelector = () => {\n  const {\n    state: { url, pid: statePid },\n    setPid\n  } = useContext(RootContext);\n  const [items, setItems] = useState<IProject[]>([]);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const pid = e.target.value;\n      if (pid) {\n        setPid(pid);\n      }\n    },\n    [setPid]\n  );\n  useEffect(\n    () => {\n      if (url) {\n        (async () => {\n          const { data: items } = await axios.get(`${baseUrl(url)}/projects`);\n          setItems(items);\n        })();\n      }\n    },\n    [url, setItems]\n  );\n\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Project</InputGroupAddon>\n      <Input value={statePid} type=\"select\" onChange={handleChange}>\n        <option value=\"\"> --- </option>\n        {items.map(item => (\n          <option key={item.id} value={item.id}>\n            {item.name}\n          </option>\n        ))}\n      </Input>\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useEffect, useContext, useState } from 'react';\nimport axios from 'axios';\nimport { Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { RootContext, baseUrl } from './Provider';\nimport { IMilestone, ITask } from './store';\nimport _ from 'lodash';\n\nexport const MilestoneSelector = () => {\n  const {\n    state: { url, pid, mid: stateMid, updated_time, reject_task_status_ids },\n    setMid,\n    setMilestones,\n    setTasks\n  } = useContext(RootContext);\n  const [items, setItems] = useState<IMilestone[]>([]);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        setMid(id);\n      }\n    },\n    [setMid, items]\n  );\n  useEffect(\n    () => {\n      if (url && pid) {\n        (async () => {\n          const { data: items } = await axios.get(\n            `${baseUrl(url)}/milestones`,\n            { params: { project: pid } }\n          );\n          setItems(items);\n          setMilestones(items);\n        })();\n      }\n    },\n    [url, pid]\n  );\n  useEffect(\n    () => {\n      if (url && stateMid) {\n        (async () => {\n          const { data: items } = await axios.get<ITask[]>(\n            `${baseUrl(url)}/tasks`,\n            {\n              headers: {\n                'x-disable-pagination': true\n              },\n              params: {\n                milestone: stateMid\n              }\n            }\n          );\n          const tasks = items.filter(\n            item => !_.includes(reject_task_status_ids, String(item.status))\n          );\n          setTasks(tasks);\n        })();\n      }\n    },\n    [url, stateMid, updated_time, reject_task_status_ids]\n  );\n\n  return (\n    <InputGroup className=\"col\">\n      <InputGroupAddon addonType=\"prepend\">Sprint</InputGroupAddon>\n      <Input type=\"select\" value={stateMid} onChange={handleChange}>\n        <option value=\"\"> --- </option>\n        {items.map(item => (\n          <option key={item.id} value={item.id}>\n            {item.name}\n          </option>\n        ))}\n      </Input>\n    </InputGroup>\n  );\n};\n","import React, { useCallback, useEffect, useContext, useState } from 'react';\nimport axios from 'axios';\nimport { Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { ITask, ICustomValue, ICustomAttr } from './store';\nimport { RootContext, baseUrl } from './Provider';\n\nexport const CustomValuesSelector = () => {\n  const {\n    state: { url, pid, custom_eid: stateEid, custom_rid: stateRid, tasks },\n    setCustomEid,\n    setCustomRid,\n    setCustomAttrs,\n    setCustomValueMap\n  } = useContext(RootContext);\n  const [items, setItems] = useState<ICustomAttr[]>([]);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      if (id) {\n        switch (e.target.name) {\n          case 'eid': {\n            setCustomEid(id);\n            break;\n          }\n          case 'rid': {\n            setCustomRid(id);\n            break;\n          }\n        }\n      }\n    },\n    [setCustomEid, setCustomRid]\n  );\n  useEffect(\n    () => {\n      if (url && pid) {\n        (async () => {\n          const { data: items } = await axios.get(\n            `${baseUrl(url)}/task-custom-attributes`,\n            { params: { project: pid } }\n          );\n          setItems(items);\n          setCustomAttrs(items);\n        })();\n      }\n    },\n    [url, pid, setItems, setCustomAttrs]\n  );\n  useEffect(\n    () => {\n      if (url && tasks.length && stateEid && stateRid) {\n        (async () => {\n          const wmap = new WeakMap(\n            await Promise.all(\n              tasks.map(async item => {\n                const { data: custom_attr_val } = await axios.get(\n                  `${baseUrl(url)}/tasks/custom-attributes-values/${item.id}`\n                );\n                return [item, custom_attr_val] as [ITask, ICustomValue];\n              })\n            )\n          );\n          setCustomValueMap(wmap);\n        })();\n      }\n    },\n    [url, tasks, stateEid, stateRid, setCustomValueMap]\n  );\n\n  return (\n    <div className=\"row\">\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Estimate</InputGroupAddon>\n        <Input\n          value={stateEid}\n          name=\"eid\"\n          type=\"select\"\n          onChange={handleChange}\n        >\n          <option value=\"\"> --- </option>\n          {items.map(item => (\n            <option key={item.id} value={item.id}>\n              {item.name}\n            </option>\n          ))}\n        </Input>\n      </InputGroup>\n      <InputGroup className=\"col\">\n        <InputGroupAddon addonType=\"prepend\">Result</InputGroupAddon>\n        <Input\n          value={stateRid}\n          name=\"rid\"\n          type=\"select\"\n          onChange={handleChange}\n        >\n          <option> --- </option>\n          {items.map(item => (\n            <option key={item.id} value={item.id}>\n              {item.name}\n            </option>\n          ))}\n        </Input>\n      </InputGroup>\n    </div>\n  );\n};\n","import React, { useEffect, useState, useContext, useCallback } from 'react';\nimport classNames from 'classnames';\nimport { Table, Card, CardHeader, Input, Label, FormGroup } from 'reactstrap';\nimport { IMilestone } from './store';\nimport { RootContext } from './Provider';\nimport moment, { Moment } from 'moment';\nimport biz from 'moment-business';\nimport _ from 'lodash';\nconst getMilestone = (mid: string, items: IMilestone[]) =>\n  items.find(item => String(item.id) === mid);\nconst getDays = (item: IMilestone) => {\n  const startM = moment(item.estimated_start).local();\n  const finishM = moment(item.estimated_finish).local();\n  const daysInSprint = finishM.diff(startM, 'days');\n  return _.times(daysInSprint).map(i => startM.clone().add(i, 'days'));\n};\nconst getDefaultBizDays = (items: Moment[]) =>\n  items\n    .filter(item => biz.isWeekDay(item))\n    .map(item => item.format('YYYY-MM-DD'));\n\nconst weekClassName = (day: number) => ({\n  'text-danger': day === 0,\n  'text-info': day === 6\n});\n\nconst DayItem = ({\n  item,\n  biz_days,\n  idx\n}: {\n  item: Moment | null;\n  biz_days: string[];\n  idx: number;\n}) => {\n  if (!item) {\n    return (\n      <td>\n        <br />\n      </td>\n    );\n  }\n  const { addBizDay, removeBizDay } = useContext(RootContext);\n  const value = item.format('YYYY-MM-DD');\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const bizDay = e.target.value;\n      e.target.checked ? addBizDay(bizDay) : removeBizDay(bizDay);\n    },\n    [addBizDay, removeBizDay]\n  );\n  return (\n    <td className={classNames(weekClassName(idx))}>\n      <FormGroup check inline>\n        <Label check>\n          <Input\n            onChange={handleChange}\n            disabled={biz.isWeekendDay(item)}\n            value={value}\n            type=\"checkbox\"\n            defaultChecked={_.includes(biz_days, value)}\n            className=\"form-check-input\"\n          />\n          {value}\n        </Label>\n      </FormGroup>\n    </td>\n  );\n};\n\nexport const DaysSelector = () => {\n  const {\n    state: { mid, milestones, biz_days },\n    setBizDays\n  } = useContext(RootContext);\n  const [items, setItems] = useState<Moment[]>([]);\n  useEffect(\n    () => {\n      const milestone = getMilestone(mid, milestones);\n      if (milestone) {\n        const items = getDays(milestone);\n        setItems(items);\n        if (biz_days.length <= 1) {\n          setBizDays(getDefaultBizDays(items));\n        }\n      }\n    },\n    [mid, milestones, biz_days]\n  );\n  if (items.length === 0) {\n    return null;\n  } else {\n    const weekdays = _.chunk(\n      [..._.times(items[0].day(), () => null), ...items],\n      7\n    );\n    return (\n      <Card>\n        <CardHeader>Business Days</CardHeader>\n        <Table bordered>\n          <thead>\n            <tr>\n              {moment.weekdays().map((item, idx) => (\n                <th className={classNames('text-center', weekClassName(idx))}>\n                  {item}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {weekdays.map(days => (\n              <tr>\n                {days.map((item, idx) => (\n                  <DayItem\n                    idx={idx}\n                    key={idx}\n                    item={item}\n                    biz_days={biz_days}\n                  />\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      </Card>\n    );\n  }\n};\n","import React, { useCallback, useEffect, useContext, useState } from 'react';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport { RootContext, baseUrl } from './Provider';\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  Form,\n  Input,\n  FormGroup,\n  Label\n} from 'reactstrap';\nimport { ITaskStatus } from './store';\nconst StatusItem = ({ item }: { item: ITaskStatus }) => {\n  const {\n    state: { reject_task_status_ids },\n    toggeRejectTaskStatus\n  } = useContext(RootContext);\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const id = e.target.value;\n      toggeRejectTaskStatus(String(id), !e.target.checked);\n    },\n    [toggeRejectTaskStatus]\n  );\n  return (\n    <FormGroup check inline>\n      <Label check>\n        <Input\n          onChange={handleChange}\n          type=\"checkbox\"\n          value={item.id}\n          defaultChecked={!_.includes(reject_task_status_ids, String(item.id))}\n        />\n        {item.name}\n      </Label>\n    </FormGroup>\n  );\n};\nexport const TaskStatusSelector = () => {\n  const {\n    state: { url, pid }\n  } = useContext(RootContext);\n  const [items, setItems] = useState<ITaskStatus[]>([]);\n  useEffect(\n    () => {\n      if (url && pid) {\n        (async () => {\n          const { data: items } = await axios.get(\n            `${baseUrl(url)}/task-statuses`,\n            {\n              params: { project: pid }\n            }\n          );\n          setItems(items);\n        })();\n      }\n    },\n    [url, pid]\n  );\n  if (items.length === 0) {\n    return null;\n  }\n  return (\n    <Card>\n      <CardHeader>Task status</CardHeader>\n      <CardBody>\n        {items.map(item => (\n          <StatusItem key={item.id} item={item} />\n        ))}\n      </CardBody>\n    </Card>\n  );\n};\n","import React, { useContext, useState, useCallback } from 'react';\nimport { RootContext } from './Provider';\nimport { Form, Input, InputGroup, InputGroupAddon, Button } from 'reactstrap';\nimport { ProjectSelector } from './ProjectSelector';\nimport { MilestoneSelector } from './MilestoneSelector';\nimport { CustomValuesSelector } from './CustomValuesSelector';\nimport { DaysSelector } from './DaysSelector';\nimport { TaskStatusSelector } from './TaskStatusSelector';\nexport const Controller = () => {\n  const { state, setUrl } = useContext(RootContext);\n  const [url, setStateUrl] = useState('');\n  const handleUrl = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setStateUrl(e.target.value);\n    },\n    [setStateUrl]\n  );\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      if (url) {\n        setUrl(url);\n      }\n      e.preventDefault();\n    },\n    [url, setUrl]\n  );\n  return (\n    <>\n      <Form onSubmit={handleSubmit}>\n        <InputGroup>\n          <InputGroupAddon addonType=\"prepend\">URL</InputGroupAddon>\n          <Input\n            defaultValue={state.url}\n            onChange={handleUrl}\n            placeholder=\"http://hostname:port\"\n          />\n          <InputGroupAddon addonType=\"append\">\n            <Button>Set</Button>\n          </InputGroupAddon>\n        </InputGroup>\n      </Form>\n      <div className=\"row\">\n        <ProjectSelector />\n        <MilestoneSelector />\n      </div>\n      <CustomValuesSelector />\n      <DaysSelector />\n      <TaskStatusSelector />\n    </>\n  );\n};\n","import React, { useContext, useState, useEffect } from 'react';\nimport { RootContext } from './Provider';\nimport { ITask } from './store';\nimport { ListGroup, ListGroupItem, Card, CardHeader } from 'reactstrap';\nimport { getCustomVal } from './UserTasks';\nconst TaskItem = ({ url, item }: { item: ITask; url: string }) => {\n  const {\n    project_extra_info: { slug }\n  } = item;\n  const href = `${url}/project/${slug}/task/${item.ref}`;\n  return (\n    <ListGroupItem tag=\"a\" target=\"_blank\" href={href}>\n      {item.subject}\n    </ListGroupItem>\n  );\n};\nexport const UnSettingTasks = () => {\n  const {\n    state: { url, tasks, custom_value_map, custom_eid }\n  } = useContext(RootContext);\n  const [items, setItems] = useState<ITask[]>([]);\n  useEffect(\n    () => {\n      if (tasks.length > 0 && custom_eid) {\n        const eid = Number(custom_eid);\n        const items = tasks.filter(\n          task => getCustomVal(custom_value_map, task, eid) === 0\n        );\n        if (tasks.length > items.length) {\n          setItems(items);\n        }\n      }\n    },\n    [tasks, custom_value_map, custom_eid]\n  );\n  if (items.length === 0) {\n    return null;\n  } else {\n    return (\n      <Card>\n        <CardHeader>Unsetting tasks</CardHeader>\n        <ListGroup>\n          {items.map(item => (\n            <TaskItem url={url} key={item.id} item={item} />\n          ))}\n        </ListGroup>\n      </Card>\n    );\n  }\n};\n","import React from 'react';\nimport { Chart } from './Chart';\nimport { Controller } from './Controller';\nimport { UserTasks } from './UserTasks';\nimport { UnSettingTasks } from './UnSettingTasks';\nimport { Provider } from './Provider';\nexport const App = () => (\n  <div className=\"container\">\n    <Provider>\n      <Controller />\n      <UserTasks />\n      <UnSettingTasks />\n      <Chart />\n    </Provider>\n  </div>\n);\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}